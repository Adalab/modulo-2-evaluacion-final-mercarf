"use strict";let searchSeries=[],favSeries=[];const form=document.querySelector(".form-search"),inputSearch=document.querySelector(".js-input-search"),errorMessage=document.querySelector(".js-error-message"),listSeries=document.querySelector(".js-list-series"),listFav=document.querySelector(".js-list-favorites"),getDataFromApi=e=>{const t=inputSearch.value;e.preventDefault(),fetch("http://api.tvmaze.com/search/shows?q="+t).then(e=>e.json()).then(e=>{searchSeries=e,""!==t?(paintSeriesSearch(),errorMessage.innerHTML=""):paintError()})};function paintError(){errorMessage.innerHTML="ðŸ”” No has introducido nintun dato ðŸ””",listSeries.innerHTML=""}form.addEventListener("submit",getDataFromApi);const paintSeriesSearch=()=>{const e=document.querySelector(".js-list-series");for(let t of searchSeries){const s=t.show;let r=s.summary||"No hay informacion sobre esta serie";const i=document.createElement("li");i.classList.add("serie"),i.classList.add("js-serie"),i.setAttribute("id",s.id);const a=document.createElement("h2");a.classList.add("serie-title");const o=document.createTextNode(s.name);a.appendChild(o),a.setAttribute("id",s.id),i.appendChild(a);const n=document.createElement("img");n.classList.add("js-serie__img"),null!==s.image?n.setAttribute("src",s.image.medium):n.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV"),n.setAttribute("alt","Serie "+s.name),n.setAttribute("id",s.id),i.appendChild(n);const c=document.createElement("div");c.classList.add("serie-summary");const l=document.createTextNode(r);c.appendChild(l),c.setAttribute("id",s.id),i.appendChild(c),e.appendChild(i)}listenProductsClicks(),inputSearch.value=""},handleSerieClick=e=>{const t=parseInt(e.currentTarget.id),s=searchSeries.find(e=>e.show.id===t),r=favSeries.findIndex(e=>e.show.id===t);e.currentTarget.classList.toggle("favorite");void 0===favSeries.find(e=>e.show.id===t)?favSeries.push(s):favSeries.splice(r,1),console.log(s),paintSeriesFav(),updateLocalStorage()},listenProductsClicks=()=>{const e=document.querySelectorAll(".js-serie");for(let t=0;t<e.length;t++){e[t].addEventListener("click",handleSerieClick)}},paintSeriesFav=()=>{let e="";for(let t of favSeries){const s=t.show;e+=`<li class="fav js-fav" id="${s.id}">`,e+='<div class="fav__container">',e+=`<h3 id="${s.id}" class="fav__title">${s.name}</h3>`,e+='<i class="far fa-trash-alt"></i>',e+="</div>",null!==s.image?e+=`<img src="${s.image.medium}" id="${s.id}" class="js-fav__img" alt="Serie ${s.name}" />`:e+=`<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" id="${s.id}" class="js-fav__img" alt="Serie ${s.name}" />`,e+="</li>",listFav.innerHTML=e}listenFavsClicks()},handleFavsClick=e=>{const t=parseInt(e.currentTarget.id);console.log(t);const s=favSeries.findIndex(e=>e.show.id===t);console.log(s),favSeries.splice(s,1),updateLocalStorage(),paintSeriesFav()},listenFavsClicks=()=>{const e=document.querySelectorAll(".js-fav");for(let t=0;t<e.length;t++){e[t].addEventListener("click",handleFavsClick)}},updateLocalStorage=()=>{localStorage.setItem("Favorites",JSON.stringify(favSeries))},getFromLocalStorage=()=>{const e=JSON.parse(localStorage.getItem("Favorites"));null!==e&&(favSeries=e,paintSeriesFav())},btnReset=document.querySelector(".js-reset-btn"),resetFav=()=>{favSeries=[],updateLocalStorage(),listFav.innerHTML="",paintSeriesFav()};btnReset.addEventListener("click",resetFav),getFromLocalStorage();const arrowTransform=document.querySelector(".js-arrowTransform"),arrowMenu=document.querySelector(".js-arrow"),collapsibleHidden=document.querySelector(".js-hidden");function changeCollapsible(){collapsibleHidden.classList.toggle("hidden"),arrowTransform.classList.toggle("transform")}console.log(arrowTransform),arrowMenu.addEventListener("click",changeCollapsible);