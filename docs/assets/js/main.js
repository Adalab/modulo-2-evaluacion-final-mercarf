"use strict";let searchSeries=[],favSeries=[];const form=document.querySelector(".form-search"),inputSearch=document.querySelector(".js-input-search"),errorMessage=document.querySelector(".js-error-message"),listSeries=document.querySelector(".js-list-series"),listFav=document.querySelector(".js-list-favorites"),getDataFromApi=e=>{const s=inputSearch.value;e.preventDefault(),fetch("http://api.tvmaze.com/search/shows?q="+s).then(e=>e.json()).then(e=>{searchSeries=e,""!==s?(paintSeriesSearch(),errorMessage.innerHTML=""):paintError()})};function paintError(){errorMessage.innerHTML="ðŸ”” No has introducido nintun dato ðŸ””",listSeries.innerHTML=""}form.addEventListener("submit",getDataFromApi);const paintSeriesSearch=()=>{const e=document.querySelector(".js-list-series");let s="";for(let r of searchSeries){const i=r.show;let t=i.summary||"No hay informacion sobre esta serie";s+=`<li class="serie js-serie" id="${i.id}">`,s+=`<h2 id="${i.id}" class="serie__title">${i.name}</h2>`,null!==i.image?s+=`<img src="${r.show.image.medium}" id="${i.id}" class="js-serie__img" alt="Serie ${i.name}" />`:s+=`<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" id="${i.id}" class="js-serie__img" alt="Serie ${i.name}" />`,s+=`<div class="serie-summary" id="${i.id}">${t}</div>`,s+="</li>",e.innerHTML=s}listenProductsClicks(),inputSearch.value=""},handleSerieClick=e=>{const s=parseInt(e.currentTarget.id),r=searchSeries.find(e=>e.show.id===s),i=favSeries.findIndex(e=>e.show.id===s);e.currentTarget.classList.toggle("favorite");void 0===favSeries.find(e=>e.show.id===s)?favSeries.push(r):favSeries.splice(i,1),console.log(r),paintSeriesFav(),updateLocalStorage()},listenProductsClicks=()=>{const e=document.querySelectorAll(".js-serie");for(let s=0;s<e.length;s++){e[s].addEventListener("click",handleSerieClick)}},paintSeriesFav=()=>{let e="";for(let s of favSeries){const r=s.show;e+=`<li class="fav js-fav" id="${r.id}">`,e+='<div class="fav__container">',e+=`<h3 id="${r.id}" class="fav__title">${r.name}</h3>`,e+='<i class="far fa-trash-alt"></i>',e+="</div>",null!==r.image?e+=`<img src="${r.image.medium}" id="${r.id}" class="js-fav__img" alt="Serie ${r.name}" />`:e+=`<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" id="${r.id}" class="js-fav__img" alt="Serie ${r.name}" />`,e+="</li>",listFav.innerHTML=e}listenFavsClicks()},handleFavsClick=e=>{const s=parseInt(e.currentTarget.id);console.log(s);const r=favSeries.findIndex(e=>e.show.id===s);console.log(r),favSeries.splice(r,1),updateLocalStorage(),paintSeriesFav()},listenFavsClicks=()=>{const e=document.querySelectorAll(".js-fav");for(let s=0;s<e.length;s++){e[s].addEventListener("click",handleFavsClick)}},updateLocalStorage=()=>{localStorage.setItem("Favorites",JSON.stringify(favSeries))},getFromLocalStorage=()=>{const e=JSON.parse(localStorage.getItem("Favorites"));null!==e&&(favSeries=e,paintSeriesFav())},btnReset=document.querySelector(".js-reset-btn"),resetFav=()=>{favSeries=[],updateLocalStorage(),listFav.innerHTML="",paintSeriesFav()};btnReset.addEventListener("click",resetFav),getFromLocalStorage();const arrowTransform=document.querySelector(".js-arrowTransform"),arrowMenu=document.querySelector(".js-arrow"),collapsibleHidden=document.querySelector(".js-hidden");function changeCollapsible(){collapsibleHidden.classList.toggle("hidden"),arrowTransform.classList.toggle("transform")}console.log(arrowTransform),arrowMenu.addEventListener("click",changeCollapsible);