"use strict";let searchSeries=[],favSeries=[];const form=document.querySelector(".form-search"),inputSearch=document.querySelector(".js-input-search"),errorMessage=document.querySelector(".js-error-message"),listSeries=document.querySelector(".js-list-series"),listFav=document.querySelector(".js-list-favorites"),getDataFromApi=e=>{const s=inputSearch.value;e.preventDefault(),fetch("http://api.tvmaze.com/search/shows?q="+s).then(e=>e.json()).then(e=>{searchSeries=e,""!==s?(paintSeriesSearch(),errorMessage.innerHTML=""):paintError()})};function paintError(){errorMessage.innerHTML="No has introducido nintun dato",listSeries.innerHTML=""}form.addEventListener("submit",getDataFromApi);const paintSeriesSearch=()=>{const e=document.querySelector(".js-list-series");let s="";for(let i of searchSeries){const r=i.show;let t=r.summary||"No hay informacion sobre esta serie";s+=`<li class="serie js-serie" id="${r.id}">`,s+=`<h2 id="${r.id}" class="serie__title">${r.name}</h2>`,null!==r.image?s+=`<img src="${i.show.image.medium}" id="${r.id}" class="js-serie__img" alt="Serie ${r.name}" />`:s+=`<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" id="${r.id}" class="js-serie__img" alt="Serie ${r.name}" />`,s+=`<div class="serie-summary" id="${r.id}">${t}</div>`,s+="</li>",e.innerHTML=s}listenProductsClicks(),inputSearch.value=""},handleSerieClick=e=>{const s=parseInt(e.currentTarget.id),i=searchSeries.find(e=>e.show.id===s),r=favSeries.findIndex(e=>e.show.id===s);e.currentTarget.classList.toggle("favorite");void 0===favSeries.find(e=>e.show.id===s)?favSeries.push(i):favSeries.splice(r,1),console.log(i),paintSeriesFav(),updateLocalStorage()},listenProductsClicks=()=>{const e=document.querySelectorAll(".js-serie");for(let s=0;s<e.length;s++){e[s].addEventListener("click",handleSerieClick)}},paintSeriesFav=()=>{let e="";for(let s of favSeries){const i=s.show;e+=`<li class="fav js-fav" id="${i.id}">`,e+='<div class="fav__container">',e+=`<h3 id="${i.id}" class="fav__title">${i.name}</h3>`,e+='<i class="far fa-trash-alt"></i>',e+="</div>",null!==i.image?e+=`<img src="${i.image.medium}" id="${i.id}" class="js-fav__img" alt="Serie ${i.name}" />`:e+=`<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" id="${i.id}" class="js-fav__img" alt="Serie ${i.name}" />`,e+="</li>",listFav.innerHTML=e}listenFavsClicks()},handleFavsClick=e=>{const s=parseInt(e.currentTarget.id);console.log(s);const i=favSeries.findIndex(e=>e.show.id===s);console.log(i),favSeries.splice(i,1),updateLocalStorage(),paintSeriesFav()},listenFavsClicks=()=>{const e=document.querySelectorAll(".js-fav");for(let s=0;s<e.length;s++){e[s].addEventListener("click",handleFavsClick)}},updateLocalStorage=()=>{localStorage.setItem("Favorites",JSON.stringify(favSeries))},getFromLocalStorage=()=>{const e=JSON.parse(localStorage.getItem("Favorites"));null!==e&&(favSeries=e,paintSeriesFav())},btnReset=document.querySelector(".js-reset-btn"),resetFav=()=>{favSeries=[],updateLocalStorage(),listFav.innerHTML="",paintSeriesFav()};btnReset.addEventListener("click",resetFav),getFromLocalStorage();